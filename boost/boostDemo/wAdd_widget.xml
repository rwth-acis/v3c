<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    
    <ModulePrefs title="Widget Adder"
		description="Widget to manage learning Documents and Experts."
		author="Team Boost"
		author_email="henm1314g3@dbis.rwth-aachen.de"
		height="400"
		width="600">
  	<Require feature="opensocial-0.8" />
    <Require feature="openapp" />
    <OAuth>
		<Service name="openapp"                     
		    xmlns:openapp="http://www.role-project.eu/xml/openapp/opensocialext/" 
		    openapp:service="http://purl.org/role/terms/spaceService"
		    openapp:permitReadAppend="http://purl.org/role/terms/data">

		    <Request method="" url=""/>
			<Authorization url=""/>
			<Access method="" url=""/>
		</Service>
    </OAuth>
    </ModulePrefs>
    
    <Content type="html">
    <![CDATA[
		
		<!-- We use jQuery to manipulate DOM and jQuery-UI for the interface. -->
    	<script src="http://virtus-vet.eu/boost/boostDemo/js/jquery-2.1.1.js" type="text/javascript"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js" type="text/javascript"></script>
		<script src="http://virtus-vet.eu/boost/boostDemo/js/bootstrap.min.js" type="text/javascript"></script>
		<script src="http://virtus-vet.eu/boost/boostDemo/js/boostShared.js" type="text/javascript"></script>
		
		<script src="http://virtus-vet.eu/boost/boostDemo/ladda/spin.min.js"></script>
		<script src="http://virtus-vet.eu/boost/boostDemo/ladda/ladda.min.js"></script>
		
		<script src="http://dbis.rwth-aachen.de/gadgets/iwc/lib/iwc.js"></script>

		<!-- Define CSS -->
		
		<link href="http://virtus-vet.eu/boost/boostDemo/css/bootstrap.min.css" rel="stylesheet">
		<link href="http://virtus-vet.eu/boost/boostDemo/css/tree.css" rel="stylesheet">
		<link rel="stylesheet" href="http://virtus-vet.eu/boost/boostDemo/ladda/ladda-themeless.min.css">
		<!-- JavaScript Block -->
		<script>
			
			var space;
			var iwcClient;
			
			gadgets.util.registerOnLoadHandler(init);
			function init(){
			    
				space = new openapp.oo.Resource(openapp.param.space());
				iwcClient = new iwc.Client();
				iwcClient.connect(iwcCallback);
			}

			
			
		function iwcCallback(intent){
				if(intent.action == "AUTOADDER_CREATE"){
					
				}
			}
				

	        $(document).ready(function() {
			    $('#Employee').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/employee_management_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });
			    $('#BCNManager').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/bcn_management_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });
			    $('#LearningResource').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/learning_resource_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });

			    $('#Search').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/search_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });
			    $('#debug').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/debug_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });
			    $('#Welcome').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/welcome_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });
			    $('#Admin').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/admin_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });
			    $('#Viewer').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/documents_viewer_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });
			    $('#Graph').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/graph_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });
			    $('#AccessRight').click(function() {
				    var widgetUrl = "http://virtus-vet.eu/boost/boostDemo/access_rights_management_widget.xml";
		        	var spaceURI = openapp.param.space();
		        	addWidgetToSpace(spaceURI,widgetUrl);
			    });


			});
	   	

			function addWidgetToSpace(spaceURI,widgetURL){
                var deferred = $.Deferred();
                openapp.resource.post(
                        spaceURI,
                        function(data){
                            deferred.resolve(data.uri);
                        },{
                            "http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate":"http://purl.org/role/terms/tool",
                            "http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"http://purl.org/role/terms/OpenSocialGadget",
                            "http://www.w3.org/2000/01/rdf-schema#seeAlso":widgetURL
                        }

                );
                return deferred.promise();
            }
			
		</script>
			
		<!-- HTML Block -->
		<div style="overflow-y: scroll; height:400px;">
			<div class ="panel panel-primary">
				<div class="panel-heading">
					<h3 class="panel-title"><span style="margin-right:5px;"></span> Auto add widget </h3>
				</div>
				<div id ="panel" class="panel-body">
					<div class="modal-body">
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="Employee Management Widget" id="Employee"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="BCN Management Widget" id="BCNManager"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="Graph Widget" id="Graph"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="Viewer Widget" id="Viewer"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="Admin Widget" id="Admin"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="Welcome Widget" id="Welcome"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="debug Widget" id="debug"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="Search Widget" id="Search"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="Learning Resource Widget" id="LearningResource"/><span class="ladda-label"></span></p>
						<p><input type="button" data-style="zoom-out" class="btn btn-primary ladda-button" value="Access Rights Widget" id="AccessRight"/><span class="ladda-label"></span></p>
				</div>
			</div>
		</div>
	]]>
  </Content>
</Module>